<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Setting up your environment - Fast Connect 3 Credential Insertion API</title>
  

  <link rel="shortcut icon" href="
https://www.citrix.com/etc/designs/citrix/icon-favicon.png">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link rel="stylesheet" href="../css/override.css" type="text/css" />
  <link rel="stylesheet" href="../css/font-awesome.css" type="text/css" />

  
  <script>
    // Current page data
    var mkdocs_page_name = "Setting up your environment";
    var mkdocs_page_input_path = "setting-up-your-environment.md";
    var mkdocs_page_url = "/setting-up-your-environment/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/custom.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

	<div class="header-top">
		<div class="header-top-left">
			<a href="http://citrix.github.io" class="logo-position"><img height="60" src="https://thumbnail-ec2.sharefile.com/thumbnail.aspx?encparams=ypL2J0l-In6gqXJ7yeyKP8A1rqwKMH-C8-nfkJcHJNIN7Y0yZiJsYOcUe-uc0YeZzWLQSFSd1FnuMHPa30XSSINHuGOA8nvvnBT5WmjGlKvd5mxJ4IfT7iTVyHELwhWQiNCznPCiIFyhkA78uKX77PlU2iyhM4YdRM1NKabBe-4wXuiFJsbtAxyJ2UukO_E2ZSf1W3l75Dw8G0zflVkT-EFqyx1zSGId0qzLjm6nzJ8dA9zo-1AJzUisdzmGMzHOq_LMsOWyaalvmcWvCkl-q10GBSbfekfTIFW9LpZNYjkLNSnK8rcwNjWVr_jYayrGjIj2e5dDIMiDj3NRvW51AvHRjxYH9xRRRtY$" target="_blank" class="logo-citrix"><span style="color:#fff;font-size: 20px;position: relative;top:4px;left: 5px">SDK Reference</span></a>
		</div>
		<div class="header-top-right">
			<ul>
			<!--	<li class="list-inline home"><a href="..">HOME</a></li>
				<li class="list-inline support"><a href="http://support.citrix.com">SUPPORT</a></li>-->
				<form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <li class="list-inline support"><input name="q" id="txtName" type="text" placeholder="Search SDKs" 
            class="searchdocs">
<a class="fa fa-search errspan"></a></li>
</form>
				<!--<li class="list-inline"><a href="http://citrix.com/download">DOWNLOADS</a></li>-->
			</ul>

		</div>
	</div>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
	<i class="fa fa-search"></i>
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="..">Fast Connect 3 Credential Insertion API</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../whats-new/">What's new</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <span class="expli"><i class="fa fa-plus-square-o" aria-hidden="true"></i></span><a class="current" style="width:250px;" href="./">Setting up your environment</a>
        
            <ul style="display:none">
            
                <li class="toctree-l3"><a href="#setting-up-your-environment">Setting up your environment</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../api-functions/">API functions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../launching-applications-and-session-management/">Launching Applications and Session Management using the Self Service Plug-in (SSP)</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" style="width:250px;" href="../examples/">API examples</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      


      
      <div class="wy-nav-content">
        <div class="rst-content">
         <!-- <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Setting up your environment</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div> -->
          <div role="main">
            <div class="section">
             
                <h1 id="setting-up-your-environment"><a class="toclink" href="#setting-up-your-environment">Setting up your environment</a></h1>
<p>To use the Fast Connect API you must first configure your site
appropriately, including setting up SSO:</p>
<ol>
<li>If you are using StoreFront, enable the HTTP Basic authentication method as follows:
<img alt="" src="../setting-up-your-environment.png" /></li>
<li>Install Citrix Receiver for Windows 4.2 or later using the <code>/includesson</code> flag: <code>CitrixReceiver.exe/includesson</code></li>
<li>
<p>By default, user credentials are captured at Windows session logon. This may not always be desirable, especially in off-domain pass-through scenarios; to disable logon credential capture, use the <code>LOGON\_CREDENTIAL\_CAPTURE\_ENABLE</code> setting:</p>
<div class="codehilite"><pre><span></span>CitrixReceiver.exe/includesson
LOGON\_CREDENTIAL\_CAPTURE\_ENABLE=No
</pre></div>


</li>
<li>
<p>Import the <code>receiver.adml</code> and <code>receiver.admx</code> files and then open <code>gpedit.msc</code>. This will make the Group Policy templates appear within the gpedit.msc
GUI. <img alt="" src="../gpedit-msc-gui.png" />  </p>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Note<ul>
<li>For information on importing Citrix Receiver for Windows Group Policy administrative template for Citrix Receiver for Windows Version 4.5, see <a href="http://docs.citrix.com/en-us/receiver/windows/4-5/configure/ica-import-icaclient-template-v2.html">Citrix Product Documentation.</a></li>
<li>For information on importing Citrix Receiver for Windows Group Policy administrative template for Citrix Receiver for Windows Version 4.6, see <a href="http://docs.citrix.com/en-us/receiver/windows/4-6/configure/ica-import-icaclient-template-v2.html">Citrix Product Documentation.</a></li>
</ul>
</p>
</div>
<p>&#53;. Navigate to the administrative templates folder and then select <strong>Citrix Components</strong> &gt; <strong>Citrix Receiver</strong> &gt; <strong>User authentication</strong>.</p>
<p>&#54;. Select the GPO policy Kerberos authentication, double-click it, and then disable it.</p>
<div class="admonition tip">
<p class="admonition-title">Note<p>The order in which you configure policies is important. You must disable Kerberos authentication before configuring the Local user name and password policy as described in step 6. </p>
</p>
</div>
<p>&#55;. To allow SSO functionality, locate the GPO policy Local user name and password, double-click it, and then enable the following options:</p>
<ul>
<li>Enable pass-through authentication</li>
<li>Allow pass-through authentication for all ICA connections</li>
</ul>
<p>&#56;. Navigate to the administrative templates folder and then select <strong>Citrix Components</strong> &gt; <strong>Citrix Receiver</strong> &gt; <strong>Fast Connect API Support</strong></p>
<p>&#57;. To allow Fast Connect functionality, locate the GPO policy Manage FastConnectAPI support, double-click it, and then enable the following options:</p>
<ul>
<li>Enable the GPO</li>
<li>Enable Fast Connect API Functionality Disable Leave Apps Running On</li>
<li>Logoff</li>
<li>Enable Integrate Self Service Plugin with FastConnect</li>
</ul>
<p>&#49;&#48;. Optionally, in the administrative templates folder, select <strong>Citrix Components</strong> &gt; <strong>Citrix Receiver</strong> &gt; <strong>SelfService</strong> &gt; <strong>Manage App shortcut</strong>:</p>
<ul>
<li>Startmenu Directory = Citrix</li>
<li>Desktop Directory = Citrix</li>
<li>Disable Startmenu Shortcut = False (clear checkbox)</li>
<li>Enable Desktop Shortcut = True (select checkbox )</li>
<li>Disable Categorypath = True (select checkbox to use StoreFront categories in the Start menu)</li>
<li>RemoveAppsOnLogoff = True (select checkbox)</li>
<li>Clear the set of applications shown in the Receiver Windows on log off = True (select checkbox)</li>
<li>Prevent Receiver performing a refresh of the application list when opened = True (select checkbox)</li>
<li>Ignore self service selection of apps and make all mandatory = False (clear checkbox), but True (select checkbox) if you are using Web Interface</li>
</ul>
<p>&#49;&#49;. Optionally, select <strong>SelfService</strong> &gt; <strong>Control when Receiver attempts to reconnect to existing sessions</strong>: </p>
<ul>
<li>Enable the policy</li>
<li>Choose the appropriate combination of reconnect conditions</li>
</ul>
<p>&#49;&#50; Optionally, select <strong>SelfService</strong> &gt; <strong>Enable application Prelaunch</strong>. Enable this policy to disable prelaunch.</p>
<p>&#49;&#51;. If you are using StoreFront, add the FQDN of the XenDesktop Controller to the intranet zone: <img alt="" src="../add-fqdn.png" />
You can set this through Group Policy:</p>
<ul>
<li>Select <strong>Computer Configuration</strong> &gt; <strong>Administrative Templates</strong> &gt; <strong>Windows Components</strong> &gt; <strong>Internet Explorer</strong> &gt; <strong>Internet Control Panel</strong> &gt; <strong>Security Page</strong></li>
<li>Select <strong>Site to Zone Assignment List</strong>, enable it, then add the FQDN of the XenDesktop Controller as a zone assignment with a value of <strong>1</strong>. For more details, see
<a href="">http://blogs.msdn.com/b/askie/archive/2012/06/05/how-to-configure-internet-explorer- security-zone-sites-using-group-polices.aspx</a></li>
</ul>
<p>&#49;&#52;. On the command line, rungpupdate/forceto apply these settings.</p>
<p>&#49;&#53; Start Citrix Receiver from the Start menu.</p>
<p>&#49;&#54;. When you are prompted for an account, specify the URL for your StoreFront Services Site, StoreFront XenApp Services Site, or Web Interface XenApp Services Site. </p>
<p>A StoreFront URL looks like this: <em>https://SMBSZ-XENAPPS1.xa.local/Citrix/Store/discovery</em></p>
<p>A Web Interface URL looks like this: <em>https://SMBSZXENAPPS1.xa.local/Citrix/PNAgent/config.xml</em></p>
<div class="admonition tip">
<p class="admonition-title">Note<p>If you require an http (unsecure) URL, first perform step 13 above before re-attempting this step.</p>
</p>
</div>
<p>&#49;&#55;. If you are using a HTTP site, set the following registry key to allow HTTP traffic for Citrix Receiver:</p>
<ul>
<li>On 64-bit Windows:</li>
</ul>
<div class="codehilite"><pre><span></span>HKLM\SOFTWARE\Wow6432Node\Citrix\Authmanager
Name: ConnectionSecurityMode
Type: REG_SZ
Data: Any
</pre></div>


<ul>
<li>On 32-bit Windows:</li>
</ul>
<div class="codehilite"><pre><span></span>HKLM\SOFTWARE\Citrix\AuthManager
Name: ConnectionSecurityMode
Type: REG_SZ
Data: Any
</pre></div>


<p>&#49;&#56;. Restart Citrix Receiver.</p>
<p>&#49;&#57;. If you are using StoreFront, create the following registry keys and
values on the endpoint(s) to allow HTTP Basic authentication, which is needed for SSO:</p>
<ul>
<li>On 64-bit Windows:</li>
</ul>
<div class="codehilite"><pre><span></span>HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\AuthManager\Protocols
\httpbasic 
Name: Enabled
Type: REG_SZ 
Data: True
</pre></div>


<div class="codehilite"><pre><span></span>HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\AuthManager 
Name: ProtocolOrder
Type: REG_MULTI_SZ
Value: httpbasic
</pre></div>


<ul>
<li>On 32-bit Windows:</li>
</ul>
<div class="codehilite"><pre><span></span>HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\AuthManager\Protocols\httpbasic 
Name: Enabled
Type: REG_SZ 
Data: True
</pre></div>


<div class="codehilite"><pre><span></span>HKEY_LOCAL_MACHINE\SOFTWARE\Citrix\AuthManager 
Name: ProtocolOrder
Type: REG_MULTI_SZ
Data: httpbasic
</pre></div>


<p>&#50;&#48;. To get the store accepted, log on as any user and restart the endpoint.</p>
<p>&#50;&#49;. When the endpoint restarts, verify that the SSO functionality is enabled by running ssonsvr.exe, as described at <a href="http://support.citrix.com/article/CTX133855">http://support.citrix.com/article/CTX133855</a></p>
<p><img alt="" src="../verify-sso.png" /></p>
<p>&#50;&#50;. You can now inject a user name and password into the SSO functionality by interacting with the Fast Connect API, using the LogonSsoUser() function described later in this document.</p>
<p>&#50;&#51;. If you would like the Self-Service Plug-in UI to automatically log on and log off in response to the Fast Connect LogonSSOUser and LogoffSSOUser library calls and thereby update the user’s icons, enable the policy “Integrate Self Service Plugin with FastConnect” described in step 8.</p>
<p>Alternatively, you can manually update the UI and desktop icons following these calls by using the following sequence:</p>
<div class="codehilite"><pre><span></span>SelfService.exe –ipoll          // Refreshes the SSP GUI
</pre></div>


<p>&#50;&#52;. Start Receiver from the Start menu. The injected user will be logged on to Receiver.</p>
<p>All the user’s applications then appear for the first time on the desktop, the Start menu, and within the SSP GUI.</p>
<p><img alt="" src="../launch-receiver.png" /></p>
<p>&#50;&#53;. To inject further user credentials into Receiver through Fast Connect, repeat Step 15. Receiver on the endpoint is now set up for SSO and Fast Connect API use.</p>
              
               
            </div>
          </div>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span class="prev"><a href="../whats-new/"><i class="fa fa-angle-left"></i> Previous</a></span>
      
      
        <span class="next"><a href="../api-functions/">Next <i class="fa fa-angle-right"></i></a></span>
      
    </span>
	<div class="footer-right">
		<ul class="social-links">
			<li class="list-inline"><a href="https://twitter.com/citrix"><i class="fa fa-twitter"></i>@citrix</a></li>
			<li class="list-inline"><a href="mailto:support@citrix.com"><i class="fa fa-envelope-o"></i>support@citrix.com</a></li>
		</ul>
		<ul class="inner-pages">
			<li class="list-inline"><a href="http://citrix.com/about/legal">Privacy and Terms</li>
		</ul>
	</div>
</div>-->

</body>
</html>
